<?xml version="1.0" encoding="utf-8"?>
<Window x:Class="EpicRPGBot.UI.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:wv2="clr-namespace:Microsoft.Web.WebView2.Wpf;assembly=Microsoft.Web.WebView2.Wpf"
        mc:Ignorable="d"
        Title="EpicRPG Bot UI" Height="800" Width="1300" WindowStartupLocation="CenterScreen">
    <Grid Background="#1e1f22">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="260"/>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="300"/>
        </Grid.ColumnDefinitions>

        <!-- Left: Stats / Console -->
        <Border Grid.Column="0" Background="#242529" BorderBrush="#2f3136" BorderThickness="0,0,1,0">
            <DockPanel Margin="12">
                <StackPanel Orientation="Horizontal" DockPanel.Dock="Top" Margin="0,0,0,12">
                    <Button Name="LastMessagesTabBtn" Content="Last messages" Margin="0,0,8,0" Padding="8,4" Click="LastMessagesTabBtn_Click"/>
                    <Button Name="StatsTabBtn" Content="Stats" Margin="0,0,8,0" Padding="8,4" Click="StatsTabBtn_Click"/>
                    <Button Name="ConsoleTabBtn" Content="Console" Padding="8,4" Click="ConsoleTabBtn_Click"/>
                </StackPanel>

                <Grid>
                    <!-- Stats view: last 5 messages -->
                    <Grid Name="LastMessagesPanel" Visibility="Visible">
                        <ListBox Name="StatsList"
                                 Background="#1e1f22"
                                 Foreground="#ddd"
                                 BorderBrush="#3a3c42"
                                 HorizontalContentAlignment="Stretch">
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=., Mode=OneWay}"
                                               TextWrapping="Wrap" />
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>
                    </Grid>

                    <!-- Stats counters -->
                    <Grid Name="StatsPanel" Visibility="Collapsed">
                        <StackPanel Background="#1e1f22" Margin="4">
                            <TextBlock Text="Stats" Foreground="#ddd" FontWeight="SemiBold" Margin="0,0,0,8"/>
                            <TextBlock Name="HuntCountText" Text="Hunt sent: 0" Foreground="#ddd"/>
                        </StackPanel>
                    </Grid>

                    <!-- Console view: log lines -->
                    <Grid Name="ConsolePanel" Visibility="Collapsed">
                        <ListBox Name="ConsoleList"
                                 Background="#1e1f22"
                                 Foreground="#ddd"
                                 BorderBrush="#3a3c42"
                                 HorizontalContentAlignment="Stretch">
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Path=., Mode=OneWay}"
                                               TextWrapping="Wrap" />
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>
                    </Grid>
                </Grid>
            </DockPanel>
        </Border>

        <!-- Center: Discord Chat via WebView2 -->
        <Grid Grid.Column="1">
            <Grid.RowDefinitions>
                <RowDefinition Height="40"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <DockPanel Grid.Row="0" Background="#2b2d31" LastChildFill="False">
                <TextBlock Text="Discord" VerticalAlignment="Center" Margin="12,0,0,0" Foreground="#ddd" FontWeight="SemiBold"/>
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,0,8,0">
                    <Button Name="ReloadBtn" Content="Reload" Margin="8,6" Padding="12,4" Click="ReloadBtn_Click"/>
                    <Button Name="GoChannelBtn" Content="Go To Channel" Margin="8,6" Padding="12,4" Click="GoChannelBtn_Click"/>
                </StackPanel>
            </DockPanel>

            <Grid Grid.Row="1" Background="#1e1f22">
                <wv2:WebView2 Name="Web" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"/>
                <TextBlock Name="InitHint" Text="Loading WebView2..." Foreground="#bbb" HorizontalAlignment="Center" VerticalAlignment="Center" Visibility="Collapsed"/>
            </Grid>
        </Grid>

        <!-- Right: Settings -->
        <Border Grid.Column="2" Background="#242529" BorderBrush="#2f3136" BorderThickness="1,0,0,0">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel Margin="12">
                    <TextBlock Text="Settings" Foreground="#ddd" FontSize="18" FontWeight="SemiBold" Margin="0,0,0,12"/>
                    <StackPanel Orientation="Vertical" Margin="0,4,0,0">
                        <TextBlock Text="Discord Channel URL (.env DISCORD_CHANNEL_URL)" Foreground="#aaa"/>
                        <TextBox Name="ChannelUrlBox" Margin="0,4,0,8" Background="#1e1f22" Foreground="#ddd" BorderBrush="#3a3c42"/>
                        <CheckBox Name="UseAtMeFallback" Content="Fallback to @me if empty" Foreground="#ddd" IsChecked="True" Margin="0,0,0,12"/>
                    </StackPanel>

                    <Separator Background="#2f3136" Margin="0,8,0,12"/>

                    <TextBlock Text="Bot Parameters" Foreground="#ddd" FontWeight="SemiBold" Margin="0,0,0,8"/>
                    <UniformGrid Columns="2" Rows="2" Margin="0,0,0,8">
                        <StackPanel Margin="0,0,8,0">
                            <TextBlock Text="Area" Foreground="#aaa"/>
                            <TextBox Name="AreaBox" Text="10" Background="#1e1f22" Foreground="#ddd" BorderBrush="#3a3c42" Margin="0,4,0,0"/>
                        </StackPanel>
                        <StackPanel>
                            <TextBlock Text="Hunt cooldown (ms)" Foreground="#aaa"/>
                            <TextBox Name="HuntCdBox" Text="21000" Background="#1e1f22" Foreground="#ddd" BorderBrush="#3a3c42" Margin="0,4,0,0"/>
                        </StackPanel>
                        <StackPanel Margin="0,8,8,0">
                            <TextBlock Text="Work cooldown (ms)" Foreground="#aaa"/>
                            <TextBox Name="WorkCdBox" Text="99000" Background="#1e1f22" Foreground="#ddd" BorderBrush="#3a3c42" Margin="0,4,0,0"/>
                        </StackPanel>
                        <StackPanel Margin="0,8,0,0">
                            <TextBlock Text="Farm cooldown (ms)" Foreground="#aaa"/>
                            <TextBox Name="FarmCdBox" Text="196000" Background="#1e1f22" Foreground="#ddd" BorderBrush="#3a3c42" Margin="0,4,0,0"/>
                        </StackPanel>
                    </UniformGrid>

                    <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
                        <Button Name="StartBtn" Content="Start Bot" Margin="0,0,8,0" Padding="12,4" Click="StartBtn_Click"/>
                        <Button Name="StopBtn" Content="Stop Bot" Padding="12,4" Click="StopBtn_Click"/>
                        <Button Name="InitBtn" Content="Inicialize" Margin="8,0,0,0" Padding="12,4" Click="InitBtn_Click"/>
                    </StackPanel>

                    <Separator Background="#2f3136" Margin="0,12,0,8"/>

                    <TextBlock Text="Cooldowns (visual)" Foreground="#ddd" FontWeight="SemiBold" Margin="0,0,0,6"/>

                    <StackPanel Name="CooldownsPanel" Margin="0,0,0,8">

                        <!-- Rewards -->
                        <TextBlock Text="Rewards" Foreground="#ccc" Margin="0,6,0,2"/>

                        <Grid Margin="0,2,0,2">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="120"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="daily" Foreground="#ddd"/>
                            <TextBlock Name="DailyCdText" Grid.Column="1" Text="00h 00m 00s" Foreground="#aaa" HorizontalAlignment="Right"/>
                        </Grid>

                        <Grid Margin="0,2,0,2">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="120"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="weekly" Foreground="#ddd"/>
                            <TextBlock Name="WeeklyCdText" Grid.Column="1" Text="00h 00m 00s" Foreground="#aaa" HorizontalAlignment="Right"/>
                        </Grid>

                        <Grid Margin="0,2,0,2">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="120"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="lootbox" Foreground="#ddd"/>
                            <TextBlock Name="LootboxCdText" Grid.Column="1" Text="00h 00m 00s" Foreground="#aaa" HorizontalAlignment="Right"/>
                        </Grid>

                        <Grid Margin="0,2,0,2">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="120"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="card hand" Foreground="#ddd"/>
                            <TextBlock Name="CardHandCdText" Grid.Column="1" Text="00h 00m 00s" Foreground="#aaa" HorizontalAlignment="Right"/>
                        </Grid>

                        <Grid Margin="0,2,0,8">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="120"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="vote" Foreground="#ddd"/>
                            <TextBlock Name="VoteCdText" Grid.Column="1" Text="00h 00m 00s" Foreground="#aaa" HorizontalAlignment="Right"/>
                        </Grid>

                        <!-- Experience -->
                        <TextBlock Text="Experience" Foreground="#ccc" Margin="0,6,0,2"/>

                        <Grid Margin="0,2,0,2">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="120"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="hunt" Foreground="#ddd"/>
                            <TextBlock Name="HuntCdText" Grid.Column="1" Text="00h 00m 00s" Foreground="#aaa" HorizontalAlignment="Right"/>
                        </Grid>

                        <Grid Margin="0,2,0,2">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="120"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="adventure" Foreground="#ddd"/>
                            <TextBlock Name="AdventureCdText" Grid.Column="1" Text="00h 00m 00s" Foreground="#aaa" HorizontalAlignment="Right"/>
                        </Grid>

                        <Grid Margin="0,2,0,2">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="120"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="training" Foreground="#ddd"/>
                            <TextBlock Name="TrainingCdText" Grid.Column="1" Text="00h 00m 00s" Foreground="#aaa" HorizontalAlignment="Right"/>
                        </Grid>

                        <Grid Margin="0,2,0,2">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="120"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="duel" Foreground="#ddd"/>
                            <TextBlock Name="DuelCdText" Grid.Column="1" Text="00h 00m 00s" Foreground="#aaa" HorizontalAlignment="Right"/>
                        </Grid>

                        <Grid Margin="0,2,0,8">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="120"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="quest | epic quest" Foreground="#ddd"/>
                            <TextBlock Name="QuestCdText" Grid.Column="1" Text="00h 00m 00s" Foreground="#aaa" HorizontalAlignment="Right"/>
                        </Grid>

                        <!-- Progress -->
                        <TextBlock Text="Progress" Foreground="#ccc" Margin="0,6,0,2"/>

                        <Grid Margin="0,2,0,2">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="120"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="chop | fish | pickup | mine" Foreground="#ddd"/>
                            <TextBlock Name="WorkCdText" Grid.Column="1" Text="00h 00m 00s" Foreground="#aaa" HorizontalAlignment="Right"/>
                        </Grid>

                        <Grid Margin="0,2,0,2">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="120"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="farm" Foreground="#ddd"/>
                            <TextBlock Name="FarmCdText" Grid.Column="1" Text="00h 00m 00s" Foreground="#aaa" HorizontalAlignment="Right"/>
                        </Grid>

                        <Grid Margin="0,2,0,2">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="120"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="horse breeding | horse race" Foreground="#ddd"/>
                            <TextBlock Name="HorseCdText" Grid.Column="1" Text="00h 00m 00s" Foreground="#aaa" HorizontalAlignment="Right"/>
                        </Grid>

                        <Grid Margin="0,2,0,2">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="120"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="arena" Foreground="#ddd"/>
                            <TextBlock Name="ArenaCdText" Grid.Column="1" Text="00h 00m 00s" Foreground="#aaa" HorizontalAlignment="Right"/>
                        </Grid>

                        <Grid Margin="0,2,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="120"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Text="dungeon | miniboss" Foreground="#ddd"/>
                            <TextBlock Name="DungeonCdText" Grid.Column="1" Text="00h 00m 00s" Foreground="#aaa" HorizontalAlignment="Right"/>
                        </Grid>

                    </StackPanel>
                    
                </StackPanel>
            </ScrollViewer>
        </Border>
    </Grid>
</Window>